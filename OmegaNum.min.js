!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).OmegaNum=r()}(this,(function(){"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var n="[OmegaNumError] Invalid argument: ",t=/^[-\+]*(Infinity|NaN|(10(\^+|\{[1-9]\d*\})|\(10(\^+|\{[1-9]\d*\})\)\^[1-9]\d* )*((\d+(\.\d*)?|\d*\.\d+)?([Ee][-\+]*))*(0|\d+(\.\d*)?|\d*\.\d+))$/,a=Math.log10(9007199254740991);function i(e,r){var n=r+1,t=Math.ceil(Math.log10(Math.abs(e))),a=Math.round(e*Math.pow(10,n-t))*Math.pow(10,t-n);return parseFloat(a.toFixed(Math.max(n-t,0)))}var u=.5671432904097838;function o(e,r){void 0===r&&(r=1e-10);var n,t,a,i,o=new s(e);if(!o.isFinite())return o;if(o.eq(s.ZERO))return o;if(o.eq(s.ONE))return new s(u);n=s.ln(o);for(var l=0;l<100;++l){if(t=s.exp(-n),a=n.sub(o.mul(t)),i=n.sub(a.div(n.add(s.ONE).sub(n.add(2).mul(a).div(s.mul(2,n).add(2))))),s.abs(i.sub(n)).lt(s.abs(i).mul(r)))return i;n=i}throw Error("Iteration failed to converge: "+o)}var s=function(){function s(r,n){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,s),this.array=[0],this.sign=1;var t=this;if(!(t instanceof s))return new s(r,n);var a,i,u=null;if("string"==typeof r&&("["==r[0]||"{"==r[0]))try{u=JSON.parse(r)}catch(e){}return"number"!=typeof r||n instanceof Array?u?a=s.fromObject(u):"string"==typeof r&&"E"==r[0]?a=s.fromHyperE(r):"string"==typeof r?a=s.fromString(r):r instanceof Array&&(void 0===n||"number"==typeof n)||"number"==typeof r&&n instanceof Array?a=s.fromArray(r,n):r instanceof s?(a=r.array.slice(0),i=r.sign):"object"==e(r)?a=s.fromObject(r):(a=[NaN],i=1):a=s.fromNumber(r),a instanceof s?(t.array=a.array,t.sign=a.sign):(t.array=a,t.sign=null!=i?i:1),t}var l,f,y;return l=s,f=[{key:"abs",value:function(){var e=this.clone();return e.sign=1,e}},{key:"absoluteValue",value:function(){return this.abs()}},{key:"neg",value:function(){var e=this.clone();return e.sign=-1*e.sign,e}},{key:"negate",value:function(){return this.neg()}},{key:"cmp",value:function(e){if(e instanceof s||(e=new s(e)),isNaN(this.array[0])||isNaN(e.array[0]))return NaN;if(this.array[0]==1/0&&e.array[0]!=1/0)return this.sign;if(this.array[0]!=1/0&&e.array[0]==1/0)return-e.sign;if(1==this.array.length&&0===this.array[0]&&1==e.array.length&&0===e.array[0])return 0;if(this.sign!=e.sign)return this.sign;var r,n=this.sign;if(this.array.length>e.array.length)r=1;else if(this.array.length<e.array.length)r=-1;else{for(var t=this.array.length-1;t>=0;--t){if(this.array[t]>e.array[t]){r=1;break}if(this.array[t]<e.array[t]){r=-1;break}}r=r||0}return r*n}},{key:"compareTo",value:function(e){return this.cmp(e)}},{key:"gt",value:function(e){return this.cmp(e)>0}},{key:"greaterThan",value:function(e){return this.gt(e)}},{key:"gte",value:function(e){return this.cmp(e)>=0}},{key:"greaterThanOrEqualTo",value:function(e){return this.gte(e)}},{key:"lt",value:function(e){return this.cmp(e)<0}},{key:"lessThan",value:function(e){return this.lt(e)}},{key:"lte",value:function(e){return this.cmp(e)<=0}},{key:"lessThanOrEqualTo",value:function(e){return this.lte(e)}},{key:"eq",value:function(e){return 0===this.cmp(e)}},{key:"equal",value:function(e){return this.eq(e)}},{key:"equalsTo",value:function(e){return this.eq(e)}},{key:"neq",value:function(e){return 0!==this.cmp(e)}},{key:"notEqual",value:function(e){return this.neq(e)}},{key:"notEqualsTo",value:function(e){return this.neq(e)}},{key:"min",value:function(e){return this.lt(e)?this.clone():new s(e)}},{key:"minimum",value:function(e){return this.min(e)}},{key:"max",value:function(e){return this.gt(e)?this.clone():new s(e)}},{key:"maximum",value:function(e){return this.max(e)}},{key:"ispos",value:function(){return this.gt(s.ZERO)}},{key:"isPositive",value:function(){return this.ispos()}},{key:"isneg",value:function(){return this.lt(s.ZERO)}},{key:"isNegative",value:function(){return this.isneg()}},{key:"isNaN",value:function(e){function r(){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(){return isNaN(this.array[0])}))},{key:"isFinite",value:function(e){function r(){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(){return isFinite(this.array[0])}))},{key:"isInfinite",value:function(){return this.array[0]==1/0}},{key:"isint",value:function(){return-1==this.sign?this.abs().isint():!!this.gt(s.MAX_SAFE_INTEGER)||Number.isInteger(this.toNumber())}},{key:"isInteger",value:function(){return this.isint()}},{key:"floor",value:function(){return this.isInteger()?this.clone():new s(Math.floor(this.toNumber()))}},{key:"ceil",value:function(){return this.isInteger()?this.clone():new s(Math.ceil(this.toNumber()))}},{key:"ceiling",value:function(){return this.ceil()}},{key:"round",value:function(){return this.isInteger()?this.clone():new s(Math.round(this.toNumber()))}},{key:"add",value:function(e){var r=this.clone(),n=new s(e);if(s.debug>=s.NORMAL&&console.log(this+"+"+n),-1==r.sign)return r.neg().add(n.neg()).neg();if(-1==n.sign)return r.sub(n.neg());if(r.eq(s.ZERO))return n;if(n.eq(s.ZERO))return r;if(r.isNaN()||n.isNaN()||r.isInfinite()&&n.isInfinite()&&r.eq(n.neg()))return s.NaN.clone();if(r.isInfinite())return r;if(n.isInfinite())return n;var t,a=r.min(n),i=r.max(n);if(i.gt(s.E_MAX_SAFE_INTEGER)||i.div(a).gt(s.MAX_SAFE_INTEGER))t=i;else if(i.array[1]){if(1!=i.array[1])throw Error("Unexpected error");var u=a.array[1]?a.array[0]:Math.log10(a.array[0]);t=new s([u+Math.log10(Math.pow(10,i.array[0]-u)+1),1])}else t=new s(r.toNumber()+n.toNumber());return t}},{key:"plus",value:function(e){return this.add(e)}},{key:"sub",value:function(e){var r=this.clone(),n=new s(e);if(s.debug>=s.NORMAL&&console.log(r+"-"+n),-1==r.sign)return r.neg().sub(n.neg()).neg();if(-1==n.sign)return r.add(n.neg());if(r.eq(n))return s.ZERO.clone();if(n.eq(s.ZERO))return r;if(r.isNaN()||n.isNaN()||r.isInfinite()&&n.isInfinite())return s.NaN.clone();if(r.isInfinite())return r;if(n.isInfinite())return n.neg();var t,a=r.min(n),i=r.max(n),u=n.gt(r);if(i.gt(s.E_MAX_SAFE_INTEGER)||i.div(a).gt(s.MAX_SAFE_INTEGER))t=i,t=u?t.neg():t;else if(i.array[1]){if(1!=i.array[1])throw Error("Unexpected error");var o=a.array[1]?a.array[0]:Math.log10(a.array[0]);t=new s([o+Math.log10(Math.pow(10,i.array[0]-o)-1),1]),t=u?t.neg():t}else t=new s(r.toNumber()-n.toNumber());return t}},{key:"minus",value:function(e){return this.sub(e)}},{key:"mul",value:function(e){var r=this.clone(),n=new s(e);if(s.debug>=s.NORMAL&&console.log(r+"*"+n),r.sign*n.sign==-1)return r.abs().mul(n.abs()).neg();if(-1==r.sign)return r.abs().mul(n.abs());if(r.isNaN()||n.isNaN()||r.eq(s.ZERO)&&n.isInfinite()||r.isInfinite()&&n.abs().eq(s.ZERO))return s.NaN.clone();if(n.eq(s.ZERO))return s.ZERO.clone();if(n.eq(s.ONE))return r.clone();if(r.isInfinite())return r;if(n.isInfinite())return n;if(r.max(n).gt(s.EE_MAX_SAFE_INTEGER))return r.max(n);var t=r.toNumber()*n.toNumber();return t<=9007199254740991?new s(t):s.pow(10,r.log10().add(n.log10()))}},{key:"times",value:function(e){return this.mul(e)}},{key:"div",value:function(e){var r=this.clone(),n=new s(e);if(s.debug>=s.NORMAL&&console.log(r+"/"+n),r.sign*n.sign==-1)return r.abs().div(n.abs()).neg();if(-1==r.sign)return r.abs().div(n.abs());if(r.isNaN()||n.isNaN()||r.isInfinite()&&n.isInfinite()||r.eq(s.ZERO)&&n.eq(s.ZERO))return s.NaN.clone();if(n.eq(s.ZERO))return s.POSITIVE_INFINITY.clone();if(n.eq(s.ONE))return r.clone();if(r.eq(n))return s.ONE.clone();if(r.isInfinite())return r;if(n.isInfinite())return s.ZERO.clone();if(r.max(n).gt(s.EE_MAX_SAFE_INTEGER))return r.gt(n)?r.clone():s.ZERO.clone();var t=r.toNumber()/n.toNumber();if(t<=9007199254740991)return new s(t);var a=s.pow(10,r.log10().sub(n.log10())),i=a.floor();return a.sub(i).lt(new s(1e-9))?i:a}},{key:"divide",value:function(e){return this.div(e)}},{key:"rec",value:function(){return s.debug>=s.NORMAL&&console.log(this+"^-1"),this.isNaN()||this.eq(s.ZERO)?s.NaN.clone():this.abs().gt("2e323")?s.ZERO.clone():new s(1/this.toNumber())}},{key:"reciprocate",value:function(){return this.rec()}},{key:"mod",value:function(e){var r=new s(e);return r.eq(s.ZERO)?s.ZERO.clone():this.sign*r.sign==-1?this.abs().mod(r.abs()).neg():-1==this.sign?this.abs().mod(r.abs()):this.sub(this.div(r).floor().mul(r))}},{key:"modular",value:function(e){return this.mod(e)}},{key:"gamma",value:function(){var e=this.clone();if(e.gt(s.TETRATED_MAX_SAFE_INTEGER))return e;if(e.gt(s.E_MAX_SAFE_INTEGER))return s.exp(e);if(e.gt(s.MAX_SAFE_INTEGER))return s.exp(s.mul(e,s.ln(e).sub(1)));var r=e.array[0];if(r>1){if(r<24)return new s(function(e){if(!isFinite(e))return e;if(e<-50)return e==Math.trunc(e)?Number.NEGATIVE_INFINITY:0;for(var r=1;e<10;)r*=e,++e;var n=.9189385332046727;n+=(.5+(e-=1))*Math.log(e),n-=e;var t=e*e,a=e;return n+=1/(12*a),n+=1/(360*(a*=t)),n+=1/(1260*(a*=a*t)),n+=1/(1680*(a*=t)),n+=1/(1188*(a*=t)),n+=691/(360360*(a*=t)),n+=7/(1092*(a*=t)),n+=3617/(122400*(a*=t)),Math.exp(n)/r}(e.sign*r));var n=r-1,t=.9189385332046727;t+=(n+.5)*Math.log(n);var a=n*n,i=n,u=12*i,o=1/u,l=(t-=n)+o;if(l==t)return s.exp(t);if((l=(t=l)-(o=1/(u=360*(i*=a))))==t)return s.exp(t);t=l;var f=1/(u=1260*(i*=a));return t+=f,t-=f=1/(u=1680*(i*=a)),s.exp(t)}return this.rec()}},{key:"fact",value:function(){var e=this.clone(),r=s.factorials;return e.lt(s.ZERO)||!e.isint()?e.add(1).gamma():e.lte(170)?new s(r[+e]):e.div(s.E).pow(e).mul(e.mul(s.PI).mul(2).sqrt()).times(1)}},{key:"factorial",value:function(){return this.fact()}},{key:"pow",value:function(e){var r=new s(e);if(s.debug>=s.NORMAL&&console.log(this+"^"+r),r.eq(s.ZERO))return s.ONE.clone();if(r.eq(s.ONE))return this.clone();if(r.lt(s.ZERO))return this.pow(r.neg()).rec();if(this.lt(s.ZERO)&&r.isint())return r.mod(2).lt(s.ONE)?this.abs().pow(r):this.abs().pow(r).neg();if(this.lt(s.ZERO))return s.NaN.clone();if(this.eq(s.ONE))return s.ONE.clone();if(this.eq(s.ZERO))return s.ZERO.clone();if(this.max(r).gt(s.TETRATED_MAX_SAFE_INTEGER))return this.max(r);if(this.eq(10))return r.gt(s.ZERO)?(r.array[1]=r.array[1]+1||1,r.standardize(),r):new s(Math.pow(10,r.toNumber()));if(r.lt(s.ONE))return this.root(r.rec());var n=Math.pow(this.toNumber(),r.toNumber());return n<=9007199254740991?new s(n):s.pow(10,this.log10().mul(r))}},{key:"toPower",value:function(e){return this.pow(e)}},{key:"exp",value:function(){return s.pow(Math.E,this)}},{key:"exponential",value:function(){return this.exp()}},{key:"sqrt",value:function(){return this.root(2)}},{key:"squareRoot",value:function(){return this.sqrt()}},{key:"cbrt",value:function(){return this.root(3)}},{key:"cubeRoot",value:function(){return this.cbrt()}},{key:"root",value:function(e){var r=new s(e);return s.debug>=s.NORMAL&&console.log(this+"root"+r),r.eq(s.ONE)?this.clone():r.lt(s.ZERO)?this.root(r.neg()).rec():r.lt(s.ONE)?this.pow(r.rec()):this.lt(s.ZERO)&&r.isint()&&r.mod(2).eq(s.ONE)?this.neg().root(r).neg():this.lt(s.ZERO)?s.NaN.clone():this.eq(s.ONE)?s.ONE.clone():this.eq(s.ZERO)?s.ZERO.clone():this.max(r).gt(s.TETRATED_MAX_SAFE_INTEGER)?this.gt(r)?this.clone():s.ZERO.clone():s.pow(10,this.log10().div(r))}},{key:"log10",value:function(){var e=this.clone();return s.debug>=s.NORMAL&&console.log("log"+this),e.lt(s.ZERO)?s.NaN.clone():e.eq(s.ZERO)?s.NEGATIVE_INFINITY.clone():e.lte(s.MAX_SAFE_INTEGER)?new s(Math.log10(e.toNumber())):e.isFinite()?e.gt(s.TETRATED_MAX_SAFE_INTEGER)?e:(e.array[1]--,e.standardize()):e}},{key:"generalLogarithm",value:function(){return this.log10()}},{key:"logBase",value:function(e){return void 0===e&&(e=Math.E),this.log10().div(s.log10(e))}},{key:"logarithm",value:function(e){return this.logBase(e)}},{key:"ln",value:function(){return this.logBase(Math.E)}},{key:"log",value:function(){return this.ln()}},{key:"naturalLogarithm",value:function(){return this.ln()}},{key:"lambertw",value:function(){var e=this.clone();if(e.isNaN())return e;if(e.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");return e.gt(s.TETRATED_MAX_SAFE_INTEGER)?e:e.gt(s.EE_MAX_SAFE_INTEGER)?(e.array[1]--,e):e.gt(s.MAX_SAFE_INTEGER)?o(e):new s(function(e,r){var n,t;if(void 0===r&&(r=1e-10),!Number.isFinite(e))return e;if(0===e)return e;if(1===e)return u;n=e<10?0:Math.log(e)-Math.log(Math.log(e));for(var a=0;a<100;++a){if(t=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(t-n)<r*Math.abs(t))return t;n=t}throw Error("Iteration failed to converge: "+e)}(e.sign*e.array[0]))}},{key:"tetr",value:function(e,r){void 0===r&&(r=s.ONE);var n,t=this.clone(),a=new s(e),i=new s(r);if(i.neq(s.ONE)&&(a=a.add(i.slog(t))),s.debug>=s.NORMAL&&console.log(t+"^^"+a),t.isNaN()||a.isNaN()||i.isNaN())return s.NaN.clone();if(a.isInfinite()&&a.sign>0)return t.gte(Math.exp(1/Math.E))?s.POSITIVE_INFINITY.clone():(n=t.ln().neg()).lambertw().div(n);if(a.lte(-2))return s.NaN.clone();if(t.eq(s.ZERO))return a.eq(s.ZERO)?s.NaN.clone():a.mod(2).eq(s.ZERO)?s.ZERO.clone():s.ONE.clone();if(t.eq(s.ONE))return a.eq(s.ONE.neg())?s.NaN.clone():s.ONE.clone();if(a.eq(s.ONE.neg()))return s.ZERO.clone();if(a.eq(s.ZERO))return s.ONE.clone();if(a.eq(s.ONE))return t;if(a.eq(2))return t.pow(t);if(t.eq(2)){if(a.eq(3))return new s(16);if(a.eq(4))return new s(65536)}if((h=t.max(a)).gt("10^^^9007199254740991"))return h;if(h.gt(s.TETRATED_MAX_SAFE_INTEGER)||a.gt(s.MAX_SAFE_INTEGER)){if(this.lt(Math.exp(1/Math.E)))return(n=t.ln().neg()).lambertw().div(n);var u=t.slog(10).add(a);return u.array[2]=(u.array[2]||0)+1,u.standardize(),u}for(var o=a.toNumber(),l=Math.floor(o),f=t.pow(o-l),y=s.NaN,c=0,h=s.E_MAX_SAFE_INTEGER;0!==l&&f.lt(h)&&c<100;++c)if(l>0){if(f=t.pow(f),y.eq(f)){l=0;break}y=f,--l}else{if(f=f.logBase(t),y.eq(f)){l=0;break}y=f,++l}return(100==c||this.lt(Math.exp(1/Math.E)))&&(l=0),f.array[1]=f.array[1]+l||l,f.standardize(),f}},{key:"tetrate",value:function(e,r){return this.tetr(e,r)}},{key:"iteratedexp",value:function(e,r){return this.tetr(e,r)}},{key:"iteratedlog",value:function(e,r){void 0===e&&(e=10),void 0===r&&(r=s.ONE.clone());var n=this.clone(),t=new s(e),a=new s(r);return a.eq(s.ZERO)?n:a.eq(s.ONE)?n.logBase(t):t.tetr(n.slog(t).sub(a))}},{key:"layeradd",value:function(e,r){void 0===r&&(r=10),void 0===e&&(e=s.ONE.clone());var n=this.clone(),t=new s(r),a=new s(e);return t.tetr(n.slog(t).add(a))}},{key:"layeradd10",value:function(e){return this.layeradd(e)}},{key:"ssrt",value:function(){var e=this.clone();if(e.lt(Math.exp(-1/Math.E)))return s.NaN.clone();if(!e.isFinite())return e;if(e.gt(s.TETRATED_MAX_SAFE_INTEGER))return e;if(e.gt(s.EE_MAX_SAFE_INTEGER))return e.array[1]--,e;var r=e.ln();return r.div(r.lambertw())}},{key:"ssqrt",value:function(){return this.ssrt()}},{key:"slog",value:function(e){void 0===e&&(e=10);var r=new s(this),n=new s(e);if(r.isNaN()||n.isNaN()||r.isInfinite()&&n.isInfinite())return s.NaN.clone();if(r.isInfinite())return r;if(n.isInfinite())return s.ZERO.clone();if(r.lt(s.ZERO))return s.ONE.neg();if(r.eq(s.ONE))return s.ZERO.clone();if(r.eq(n))return s.ONE.clone();if(n.lt(Math.exp(1/Math.E))){var t=s.tetr(n,1/0);if(r.eq(t))return s.POSITIVE_INFINITY.clone();if(r.gt(t))return s.NaN.clone()}if(r.max(n).gt("10^^^9007199254740991"))return r.gt(n)?r:s.ZERO.clone();if(r.max(n).gt(s.TETRATED_MAX_SAFE_INTEGER))return r.gt(n)?(r.array[2]--,r.standardize(),r.sub(r.array[1])):s.ZERO.clone();var a=0,i=(r.array[1]||0)-(n.array[1]||0);if(i>3){var u=i-3;a+=u,r.array[1]=r.array[1]-u}for(var o=0;o<100;++o)if(r.lt(s.ZERO))r=s.pow(n,r),--a;else{if(r.lte(1))return new s(a+r.toNumber()-1);++a,r=s.logBase(r,n)}return new s(a)}},{key:"pent",value:function(e){return this.arrow(3)(e)}},{key:"pentate",value:function(e){return this.pent(e)}},{key:"arrow",value:function(e){var r=this.clone(),n=new s(e);return!n.isint()||n.lt(s.ZERO)?function(e){return s.NaN.clone()}:n.eq(s.ZERO)?function(e){return r.mul(e)}:n.eq(s.ONE)?function(e){return r.pow(e)}:n.eq(2)?function(e){return r.tetr(e)}:function(e){var t=new s(e);if(s.debug>=s.NORMAL&&console.log(r+"{"+n+"}"+t),t.lt(s.ZERO))return s.NaN.clone();if(t.eq(s.ZERO))return s.ONE.clone();if(t.eq(s.ONE))return r.clone();if(n.gte(s.maxArrow))return console.warn("Number too large to reasonably handle it: tried to "+n.add(2)+"-ate."),s.POSITIVE_INFINITY.clone();var a,i=n.toNumber();if(t.eq(2))return r.arrow(n.sub(s.ONE))(r);if(r.max(t).gt("10{"+(i+1)+"}9007199254740991"))return r.max(t);if(r.gt("10{"+i+"}9007199254740991")||t.gt(s.MAX_SAFE_INTEGER)){r.gt("10{"+i+"}9007199254740991")?((a=r.clone()).array[i]--,a.standardize()):a=r.gt("10{"+(i-1)+"}9007199254740991")?new s(r.array[i-1]):s.ZERO;var u=a.add(t);return u.array[i]=(u.array[i]||0)+1,u.standardize(),u}var o=t.toNumber(),l=Math.floor(o),f=n.sub(s.ONE);a=r.arrow(f)(o-l);for(var y=0,c=new s("10{"+(i-1)+"}9007199254740991");0!==l&&a.lt(c)&&y<100;++y)l>0&&(a=r.arrow(f)(a),--l);return 100==y&&(l=0),a.array[i-1]=a.array[i-1]+l||l,a.standardize(),a}}},{key:"chain",value:function(e,r){return this.arrow(r)(e)}},{key:"choose",value:function(e){return s.choose(this,e)}},{key:"standardize",value:function(){var e,r=this;s.debug>=s.ALL&&console.log(r.toString()),r.array&&r.array.length||(r.array=[0]),1!=r.sign&&-1!=r.sign&&("number"!=typeof r.sign&&(r.sign=Number(r.sign)),r.sign=r.sign<0?-1:1);for(var n=r.array.length,t=0;t<n;t++){var i=r.array[t];if(null!=i){if(isNaN(i))return r.array=[NaN],r;if(!isFinite(i))return r.array=[1/0],r;0===t||Number.isInteger(i)||(r.array[t]=Math.floor(i))}else r.array[t]=0}do{for(s.debug>=s.ALL&&console.log(r.toString()),e=!1;r.array.length&&0===r.array[r.array.length-1];)r.array.pop(),e=!0;for(r.array[0]>9007199254740991&&(r.array[1]=(r.array[1]||0)+1,r.array[0]=Math.log10(r.array[0]),e=!0);r.array[0]<a&&r.array[1];)r.array[0]=Math.pow(10,r.array[0]),r.array[1]--,e=!0;if(r.array.length>2&&!r.array[1]){for(t=2;!r.array[t];++t);r.array[t-1]=r.array[0],r.array[0]=1,r.array[t]--,e=!0}for(n=r.array.length,t=1;t<n;++t)if(r.array[t]>9007199254740991){r.array[t+1]=(r.array[t+1]||0)+1,r.array[0]=r.array[t]+1;for(var u=1;u<=t;++u)r.array[u]=0;e=!0}}while(e);return r.array.length||(r.array=[0]),r}},{key:"toNumber",value:function(){return-1==this.sign?-1*this.abs().toNumber():this.array.length>=2&&(this.array[1]>=2||1==this.array[1]&&this.array[0]>Math.log10(Number.MAX_VALUE))?1/0:1==this.array[1]?Math.pow(10,this.array[0]):this.array[0]}},{key:"toString",value:function(){if(-1==this.sign)return"-"+this.abs();if(isNaN(this.array[0]))return"NaN";if(!isFinite(this.array[0]))return"Infinity";var e="";if(this.array.length>=2)for(var r=this.array.length-1;r>=2;--r){var n=r>=5?"{"+r+"}":"^".repeat(r);this.array[r]>1?e+="(10"+n+")^"+this.array[r]+" ":1==this.array[r]&&(e+="10"+n)}return this.array[1]?this.array[1]<3?e+="e".repeat(this.array[1]-1)+Math.pow(10,this.array[0]-Math.floor(this.array[0]))+"e"+Math.floor(this.array[0]):this.array[1]<8?e+="e".repeat(this.array[1])+this.array[0]:e+="(10^)^"+this.array[1]+" "+this.array[0]:e+=String(this.toNumber()),e}},{key:"toStringWithDecimalPlaces",value:function(e,r){if(-1==this.sign)return"-"+this.abs();if(isNaN(this.array[0]))return"NaN";if(!isFinite(this.array[0]))return"Infinity";var n=0,t="",a=Math.pow(10,e);if(this.array.length>=2)for(var u=this.array.length-1;!n&&u>=2;--u){var o=this.array[u];r&&o>=a?(++u,n=o,o=1):r&&this.array[u-1]>=a&&(++o,n=this.array[u-1]);var s=u>=5?"{"+u+"}":"^".repeat(u);o>1?t+="(10"+s+")^"+o+" ":1==o&&(t+="10"+s)}var l=this.array[0],f=this.array[1]||0;return l>a&&(l=Math.log10(l),++f),t+=n?i(n,e):f?f<3?"e".repeat(f-1)+i(Math.pow(10,l-Math.floor(l)),e)+"e"+i(Math.floor(l),e):f<8?"e".repeat(f)+i(l,e):r?"(10^)^"+i(f,e)+" "+i(l,e):"(10^)^"+f+" "+i(l,e):String(i(l,e))}},{key:"toExponential",value:function(e,r){return 1==this.array.length?(this.sign*this.array[0]).toExponential(e):this.toStringWithDecimalPlaces(e,r)}},{key:"toFixed",value:function(e,r){return 1==this.array.length?(this.sign*this.array[0]).toFixed(e):this.toStringWithDecimalPlaces(e,r)}},{key:"toPrecision",value:function(e,r){return 0===this.array[0]?(this.sign*this.array[0]).toFixed(e-1):1==this.array.length&&this.array[0]<1e-6?this.toExponential(e-1,r):1==this.array.length&&e>Math.log10(this.array[0])?this.toFixed(e-Math.floor(Math.log10(this.array[0]))-1,r):this.toExponential(e-1,r)}},{key:"valueOf",value:function(){return this.toString()}},{key:"toJSON",value:function(){return s.serializeMode==s.JSON?{array:this.array.slice(0),sign:this.sign}:s.serializeMode==s.STRING?this.toString():void 0}},{key:"toHyperE",value:function(){if(-1==this.sign)return"-"+this.abs().toHyperE();if(isNaN(this.array[0]))return"NaN";if(!isFinite(this.array[0]))return"Infinity";if(this.lt(s.MAX_SAFE_INTEGER))return String(this.array[0]);if(this.lt(s.E_MAX_SAFE_INTEGER))return"E"+this.array[0];for(var e="E"+this.array[0]+"#"+this.array[1],r=2;r<this.array.length;++r)e+="#"+(this.array[r]+1);return e}},{key:"clone",value:function(){var e=new s;return e.array=this.array.slice(0),e.sign=this.sign,e}}],y=[{key:"abs",value:function(e){return new s(e).abs()}},{key:"absoluteValue",value:function(e){return new s(e).abs()}},{key:"neg",value:function(e){return new s(e).neg()}},{key:"negate",value:function(e){return new s(e).neg()}},{key:"cmp",value:function(e,r){return new s(e).cmp(r)}},{key:"compare",value:function(e,r){return new s(e).cmp(r)}},{key:"gt",value:function(e,r){return new s(e).gt(r)}},{key:"greaterThan",value:function(e,r){return new s(e).gt(r)}},{key:"gte",value:function(e,r){return new s(e).gte(r)}},{key:"greaterThanOrEqualTo",value:function(e,r){return new s(e).gte(r)}},{key:"lt",value:function(e,r){return new s(e).lt(r)}},{key:"lessThan",value:function(e,r){return new s(e).lt(r)}},{key:"lte",value:function(e,r){return new s(e).lte(r)}},{key:"lessThanOrEqualTo",value:function(e,r){return new s(e).lte(r)}},{key:"eq",value:function(e,r){return new s(e).eq(r)}},{key:"equal",value:function(e,r){return new s(e).eq(r)}},{key:"equalsTo",value:function(e,r){return new s(e).eq(r)}},{key:"neq",value:function(e,r){return new s(e).neq(r)}},{key:"notEqual",value:function(e,r){return new s(e).neq(r)}},{key:"notEqualsTo",value:function(e,r){return new s(e).neq(r)}},{key:"min",value:function(e,r){return new s(e).min(r)}},{key:"minimum",value:function(e,r){return new s(e).min(r)}},{key:"max",value:function(e,r){return new s(e).max(r)}},{key:"maximum",value:function(e,r){return new s(e).max(r)}},{key:"ispos",value:function(e){return new s(e).ispos()}},{key:"isPositive",value:function(e){return new s(e).ispos()}},{key:"isneg",value:function(e){return new s(e).isneg()}},{key:"isNegative",value:function(e){return new s(e).isneg()}},{key:"isNaN",value:function(e){return new s(e).isNaN()}},{key:"isFinite",value:function(e){return new s(e).isFinite()}},{key:"isInfinite",value:function(e){return new s(e).isInfinite()}},{key:"isint",value:function(e){return new s(e).isint()}},{key:"isInteger",value:function(e){return new s(e).isint()}},{key:"floor",value:function(e){return new s(e).floor()}},{key:"ceil",value:function(e){return new s(e).ceil()}},{key:"ceiling",value:function(e){return new s(e).ceil()}},{key:"round",value:function(e){return new s(e).round()}},{key:"add",value:function(e,r){return new s(e).add(r)}},{key:"plus",value:function(e,r){return new s(e).add(r)}},{key:"sub",value:function(e,r){return new s(e).sub(r)}},{key:"minus",value:function(e,r){return new s(e).sub(r)}},{key:"mul",value:function(e,r){return new s(e).mul(r)}},{key:"times",value:function(e,r){return new s(e).mul(r)}},{key:"div",value:function(e,r){return new s(e).div(r)}},{key:"divide",value:function(e,r){return new s(e).div(r)}},{key:"rec",value:function(e){return new s(e).rec()}},{key:"reciprocate",value:function(e){return new s(e).rec()}},{key:"mod",value:function(e,r){return new s(e).mod(r)}},{key:"modular",value:function(e,r){return new s(e).mod(r)}},{key:"gamma",value:function(e){return new s(e).gamma()}},{key:"fact",value:function(e){return new s(e).fact()}},{key:"factorial",value:function(e){return new s(e).fact()}},{key:"pow",value:function(e,r){return new s(e).pow(r)}},{key:"toPower",value:function(e,r){return new s(e).pow(r)}},{key:"exp",value:function(e){return s.pow(Math.E,e)}},{key:"exponential",value:function(e){return new s(e).exp()}},{key:"sqrt",value:function(e){return new s(e).root(2)}},{key:"squareRoot",value:function(e){return new s(e).sqrt()}},{key:"cbrt",value:function(e){return new s(e).root(3)}},{key:"cubeRoot",value:function(e){return new s(e).cbrt()}},{key:"root",value:function(e,r){return new s(e).root(r)}},{key:"log10",value:function(e){return new s(e).log10()}},{key:"generalLogarithm",value:function(e){return new s(e).log10()}},{key:"logBase",value:function(e,r){return new s(e).logBase(r)}},{key:"logarithm",value:function(e,r){return new s(e).logBase(r)}},{key:"ln",value:function(e){return new s(e).ln()}},{key:"log",value:function(e){return new s(e).ln()}},{key:"naturalLogarithm",value:function(e){return new s(e).ln()}},{key:"lambertw",value:function(e){return new s(e).lambertw()}},{key:"tetr",value:function(e,r,n){return new s(e).tetr(r,n)}},{key:"tetrate",value:function(e,r,n){return new s(e).tetr(r,n)}},{key:"iteratedexp",value:function(e,r,n){return new s(e).iteratedexp(r,n)}},{key:"iteratedlog",value:function(e,r,n){return new s(e).iteratedlog(r,n)}},{key:"layeradd",value:function(e,r,n){return new s(e).layeradd(r,n)}},{key:"layeradd10",value:function(e,r){return new s(e).layeradd10(r)}},{key:"ssrt",value:function(e){return new s(e).ssqrt()}},{key:"ssqrt",value:function(e){return new s(e).ssrt()}},{key:"slog",value:function(e,r){return new s(e).slog(r)}},{key:"pent",value:function(e,r){return s.arrow(e,3,r)}},{key:"pentate",value:function(e,r){return new s(e).pent(r)}},{key:"arrow",value:function(e,r,n){return new s(e).arrow(r)(n)}},{key:"chain",value:function(e,r,n){return new s(e).arrow(n)(r)}},{key:"hyper",value:function(e){var r=new s(e);return r.eq(s.ZERO)?function(e,r){return new s(r).eq(s.ZERO)?new s(e):new s(e).add(s.ONE)}:r.eq(s.ONE)?function(e,r){return s.add(e,r)}:function(e,n){return new s(e).arrow(r.sub(2))(n)}}},{key:"affordGeometricSeries",value:function(e,r,n,t){var a=new s(e),i=new s(r),u=new s(n),o=i.mul(u.pow(t));return s.floor(a.div(o).mul(u.sub(s.ONE)).add(s.ONE).log10().div(u.log10()))}},{key:"affordArithmeticSeries",value:function(e,r,n,t){var a=new s(e),i=new s(r),u=new s(n),o=new s(t),l=i.add(o.mul(u)).sub(u.div(2)),f=l.pow(2);return l.neg().add(f.add(u.mul(a).mul(2)).sqrt()).div(u).floor()}},{key:"sumGeometricSeries",value:function(e,r,n,t){var a=new s(r),i=new s(n);return a.mul(i.pow(t)).mul(s.sub(s.ONE,i.pow(e))).div(s.sub(s.ONE,i))}},{key:"sumArithmeticSeries",value:function(e,r,n,t){var a=new s(e),i=new s(r),u=new s(t),o=i.add(u.mul(n));return a.div(2).mul(o.mul(2).plus(a.sub(s.ONE).mul(n)))}},{key:"choose",value:function(e,r){return new s(e).factorial().div(new s(r).factorial().mul(new s(e).sub(new s(r)).factorial()))}},{key:"fromNumber",value:function(e){if("number"!=typeof e)throw Error(n+"Expected Number");var r=new s;return r.array[0]=Math.abs(e),r.sign=e<0?-1:1,r.standardize(),r}},{key:"fromString",value:function(e){var r;if("string"!=typeof e)throw Error(n+"Expected String");var i=!1;if("string"==typeof e&&("["==e[0]||"{"==e[0]))try{JSON.parse(e)}finally{i=!0}if(i)return s.fromJSON(e);var u=new s;if(u.array=[0],!t.test(e))return console.warn("[OmegaNumError] Malformed input: "+e),u.array=[NaN],u;var o=!1;if("-"==e[0]||"+"==e[0]){var l=e.search(/[^-\+]/);o=((null===(r=e.substring(0,l).match(/-/g))||void 0===r?void 0:r.length)||0)%2==1,e=e.substring(l)}if("NaN"==e)u.array=[NaN];else if("Infinity"==e)u.array=[1/0];else{for(var f,y,c,h,g;e&&/^\(?10[\^\{]/.test(e);){var v;if("("==e[0]&&(e=e.substring(1)),"^"==e[2]?(v=f=e.substring(2).search(/[^\^]/),y=f+2):(f=e.indexOf("}"),v=Number(e.substring(3,f)),y=f+1),v>=s.maxArrow){console.warn("Number too large to reasonably handle it: tried to "+(v+2)+"-ate."),u.array=[1/0];break}if(")"==(e=e.substring(y))[0]?(f=e.indexOf(" "),c=Number(e.substring(2,f)),e=e.substring(f+1)):c=1,1==v)u.array[1]=(u.array[1]||0)+c;else if(2==v)f=u.array[1]||0,(y=u.array[0]||0)>=1e10&&++f,y>=10&&++f,u.array[0]=f,u.array[1]=0,u.array[2]=(u.array[2]||0)+c;else{for(f=u.array[v-1]||0,(y=u.array[v-2]||0)>=10&&++f,g=1;g<v;++g)u.array[g]=0;u.array[0]=f,u.array[v]=(u.array[v]||0)+c}}for(f=e.split(/[Ee]/),y=[u.array[0],0],c=1,g=f.length-1;g>=0;--g)h=f[g]?Number(f[g]):1,y[0]<a&&0===y[1]?y[0]=Math.pow(10,c*y[0]):-1==c?(0===y[1]?y[0]=Math.pow(10,c*y[0]):1==y[1]&&y[0]<=Math.log10(Number.MAX_VALUE)?y[0]=Math.pow(10,c*Math.pow(10,y[0])):y[0]=0,y[1]=0):y[1]++,0===y[1]?y[0]*=Number(h):1==y[1]?y[0]+=Math.log10(Number(h)):2==y[1]&&y[0]<a+Math.log10(Math.log10(Number(h)))&&(y[0]+=Math.log10(1+Math.pow(10,Math.log10(Math.log10(Number(h)))-y[0]))),y[0]<a&&y[1]?(y[0]=Math.pow(10,y[0]),y[1]--):y[0]>9007199254740991&&(y[0]=Math.log10(y[0]),y[1]++);u.array[0]=y[0],u.array[1]=(u.array[1]||0)+y[1]}return o&&(u.sign*=-1),u.standardize(),u}},{key:"fromArray",value:function(e,r){var t,a;if(e instanceof Array&&(void 0===r||"number"==typeof r))t=e,a=r;else{if(!(r instanceof Array&&"number"==typeof e))throw Error(n+"Expected an Array [and Boolean]");t=r,a=e}var i=new s;return i.array=t.slice(0),i.sign=a?Number(a):1,i.standardize(),i}},{key:"fromObject",value:function(r){if("object"!=e(r))throw Error(n+"Expected Object");if(null===r)return s.ZERO.clone();if(r instanceof Array)return s.fromArray(r);if(r instanceof s)return new s(r);if(!(r.array instanceof Array))throw Error(n+"Expected that property 'array' exists");if(void 0!==r.sign&&"number"!=typeof r.sign)throw Error(n+"Expected that property 'sign' is Number");var t=new s;return t.array=r.array.slice(0),t.sign=Number(r.sign)||1,t.standardize(),t}},{key:"fromJSON",value:function(r){if("object"==e(r))return s.fromObject(r);if("string"!=typeof r)throw Error(n+"Expected String");var t,a;try{t=JSON.parse(r)}catch(e){throw t=null,e}finally{a=s.fromObject(t)}return t=null,a}},{key:"fromHyperE",value:function(e){var r;if("string"!=typeof e)throw Error(n+"Expected String");var t=new s;if(t.array=[0],!/^[-\+]*(0|[1-9]\d*(\.\d*)?|Infinity|NaN|E[1-9]\d*(\.\d*)?(#[1-9]\d*)*)$/.test(e))return console.warn("[OmegaNumError] Malformed input: "+e),t.array=[NaN],t;var a=!1;if("-"==e[0]||"+"==e[0]){var i=e.search(/[^-\+]/);a=((null===(r=e.substring(0,i).match(/-/g))||void 0===r?void 0:r.length)||0)%2==0,e=e.substring(i)}if("NaN"==e)t.array=[NaN];else if("Infinity"==e)t.array=[1/0];else if("E"!=e[0])t.array[0]=Number(e);else if(-1==e.indexOf("#"))t.array[0]=Number(e.substring(1)),t.array[1]=1;else for(var u=e.substring(1).split("#"),o=0;o<u.length;++o){var l=Number(u[o]);o>=2&&--l,t.array[o]=l}return a&&(t.sign*=-1),t.standardize(),t}},{key:"config",value:function(r){if(!r||"object"!==e(r))throw Error("[OmegaNumError] Object expected");var t,a,i,u=["maxArrow",1,Number.MAX_SAFE_INTEGER,"serializeMode",0,1,"debug",0,2];for(t=0;t<u.length;t+=3)if(void 0!==(i=r[a=u[t]])){if(!(Math.floor(i)===i&&i>=u[t+1]&&i<=u[t+2]))throw Error(n+a+": "+i);this[a]=i}return this}},{key:"default",get:function(){return this}},{key:"OmegaNum",get:function(){return this}},{key:"set",value:function(e){this.config(e)}}],f&&r(l.prototype,f),y&&r(l,y),Object.defineProperty(l,"prototype",{writable:!1}),s}();return s.maxArrow=1e3,s.serializeMode=0,s.debug=0,s.ZERO=new s(0),s.ONE=new s(1),s.E=new s(Math.E),s.LN2=new s(Math.LN2),s.LN10=new s(Math.LN10),s.LOG2E=new s(Math.LOG2E),s.LOG10E=new s(Math.LOG10E),s.PI=new s(Math.PI),s.SQRT1_2=new s(Math.SQRT1_2),s.SQRT2=new s(Math.SQRT2),s.MAX_SAFE_INTEGER=new s(9007199254740991),s.MIN_SAFE_INTEGER=new s(Number.MIN_SAFE_INTEGER),s.NaN=new s(Number.NaN),s.NEGATIVE_INFINITY=new s(Number.NEGATIVE_INFINITY),s.POSITIVE_INFINITY=new s(Number.POSITIVE_INFINITY),s.E_MAX_SAFE_INTEGER=new s("e9007199254740991"),s.EE_MAX_SAFE_INTEGER=new s("ee9007199254740991"),s.TETRATED_MAX_SAFE_INTEGER=new s("10^^9007199254740991"),s.factorials=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,0x1b02b9306890000,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8.841761993739702e30,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,1.0333147966386145e40,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,1.3868311854568984e80,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8.247650592082472e90,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,1.1978571669969892e100,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5.797126020747368e120,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,2.4227095383672734e130,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1.352001527678403e140,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,1.1462805637347084e170,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,1.7629525510902446e180,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3.393108684451898e190,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8.094298525273444e200,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,2.6904727073180504e230,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,3.80892263763057e260,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1.853271869493735e280,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1.503616514864999e300,25260757449731984e286,4269068009004705e289,7257415615307999e291],s.JSON=0,s.STRING=1,s.NONE=0,s.NORMAL=1,s.ALL=2,s}));
